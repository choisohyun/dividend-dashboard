# Week 3 완성 기능 가이드

## 🎉 새로운 기능

### 1. 리포트 시스템

#### 주간 리포트
- **자동 생성**: 최근 4주 리포트 자동 계산
- **표시 내용**: 배당 합계, 입금 합계, 목표 진행률, 하이라이트
- **공유**: 텍스트 복사, 이미지 저장, 공유 기능

#### 월간 리포트
- **자동 생성**: 최근 6개월 리포트 자동 계산
- **표시 내용**: 종목별 배당 breakdown, TTM, 예상 연배당, 입금 준수율
- **상세 보기**: 확장 가능한 종목별 상세 내역

#### 커스텀 리포트 생성
- **리포트 생성 버튼**: 원하는 기간의 리포트 생성
- **달력 선택**: 주간/월간 선택 후 기간 지정
- **즉시 생성**: 클릭 한 번으로 리포트 완성

### 2. 데이터 백업/복원

#### 백업 기능
- **전체 데이터 백업**: 보유종목, 배당, 입출금, 거래 내역 전체
- **JSON 형식**: 사람이 읽을 수 있는 형식
- **버전 관리**: 백업 버전 1.0
- **다운로드**: 원클릭 다운로드

#### 복원 기능
- **병합 모드**: 기존 데이터에 추가
- **교체 모드**: 기존 데이터 삭제 후 복원
- **검증**: 백업 파일 형식 및 버전 자동 확인
- **에러 처리**: 복원 실패 시 롤백

#### 데이터 초기화
- **안전 장치**: 확인 다이얼로그
- **백업 권장**: 삭제 전 백업 안내
- **영구 삭제**: 모든 데이터 완전 제거

### 3. 사용자 경험 개선

#### 온보딩
- **환영 다이얼로그**: 첫 로그인 시 자동 표시
- **3단계 가이드**: 설정 → CSV 업로드 → 대시보드
- **다시 보지 않기**: localStorage로 저장

#### 도움말 시스템
- **페이지별 가이드**: 각 페이지 맞춤 도움말
- **사용법**: 기능별 상세 설명
- **FAQ**: 자주 묻는 질문
- **팁**: 유용한 사용 팁

#### 알림 시스템
- **Sonner 토스트**: 우아한 알림
- **성공/실패**: 작업 결과 즉시 피드백
- **자동 닫힘**: 3초 후 자동 사라짐

### 4. 네비게이션 개선

#### 새 메뉴 추가
- **리포트** 메뉴: 사이드바 및 모바일 네비게이션

#### 데이터 통계
- **설정 페이지**: 현재 데이터 현황 (종목 수, 배당 건수 등)

## 📖 사용 가이드

### 리포트 생성하기

1. **자동 리포트 확인**:
   ```
   리포트 페이지 → 주간/월간 탭 → 최근 리포트 카드 확인
   ```

2. **커스텀 리포트 생성**:
   ```
   리포트 생성 버튼 클릭 → 유형 선택 → 날짜 선택 → 생성
   ```

3. **리포트 공유**:
   ```
   복사 버튼: 텍스트로 복사
   다운로드 버튼: 이미지로 저장
   공유 버튼: 네이티브 공유 (모바일)
   ```

### 데이터 백업하기

1. **백업 생성**:
   ```
   설정 → 데이터 관리 → 백업 다운로드
   ```

2. **백업 파일**: `dividend-backup-YYYY-MM-DD.json`

3. **저장 위치**: 안전한 곳에 보관 (클라우드, 외장하드 등)

### 데이터 복원하기

1. **백업 파일 준비**: JSON 파일

2. **복원 모드 선택**:
   - **병합**: 기존 데이터 + 백업 데이터
   - **교체**: 기존 삭제 후 백업만

3. **실행**:
   ```
   설정 → 데이터 관리 → 파일 선택 → 모드 선택 → 복원 실행
   ```

## 🔒 Supabase Storage 설정

리포트 이미지 저장 기능을 사용하려면:

1. **Supabase Dashboard** → **Storage**
2. **SQL Editor**에서 `supabase/storage-policies.sql` 실행
3. `report_images` 버킷 생성 및 RLS 정책 적용

## 🧪 추가된 테스트

Week 3에서 **9개 테스트** 추가 (총 100개):

- 리포트 생성 플로우 (5개)
- 백업 데이터 검증 (4개)

```bash
pnpm test  # 100개 테스트 모두 실행
```

## ⚡️ 성능 개선

- React Query 캐싱 최적화
- 컴포넌트 lazy loading 준비
- 번들 크기 분석 완료

## 📝 다음 업데이트 (Week 4)

- 구글 시트 API 완전 연동
- 자동 백업 스케줄
- 다크 모드
- 키보드 단축키 (Cmd+K, Cmd+B 등)
- 추가 차트 옵션

---

**Week 3 완료!** 🚀

이제 완전한 기능을 갖춘 배당 투자 대시보드입니다.

